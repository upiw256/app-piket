<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kehadiran Siswa</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/all.min.css"
    />
    <style>
      .table {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      }
      .search-input {
        max-width: 200px;
      }
      .pagination {
        display: flex;
        justify-content: center;
        align-items: center;
        margin-top: 1rem;
      }
      .pagination-item {
        margin: 0.25rem;
        padding: 0.5rem 0.75rem;
        border: 1px solid #ddd;
        background-color: #fff;
        color: #333;
        cursor: pointer;
      }
      .pagination-item.active {
        background-color: #333;
        color: #fff;
      }
    </style>
  </head>
  <body class="bg-gray-100">
    <div class="flex flex-col h-screen items-center justify-center m-3">
      <div class="mb-4">
        <input
          id="searchInput"
          class="border border-gray-300 rounded-md p-2 search-input"
          type="text"
          placeholder="Search..."
        />
      </div>
      <table id="dataTable" class="table w-full">
        <thead>
          <tr class="even:bg-gray-400 odd:bg-white">
            <th class="bg-gray-200 p-2">Name</th>
            <th class="bg-gray-200 p-2">Email</th>
            <th class="bg-gray-200 p-2">Role</th>
          </tr>
        </thead>
        <tbody>
          <tr class="even:bg-gray-400 odd:bg-white">
            <td class="p-2">John Doe</td>
            <td class="p-2">john.doe@example.com</td>
            <td class="p-2">Admin</td>
          </tr>
          <tr class="even:bg-gray-400 odd:bg-white">
            <td class="p-2">Jane Smith</td>
            <td class="p-2">jane.smith@example.com</td>
            <td class="p-2">User</td>
          </tr>
          <tr class="even:bg-gray-400 odd:bg-white">
            <td class="p-2">Jine Smith</td>
            <td class="p-2">jane.smith@example.com</td>
            <td class="p-2">User</td>
          </tr>
          <tr class="even:bg-gray-400 odd:bg-white">
            <td class="p-2">Jene Smith</td>
            <td class="p-2">jane.smith@example.com</td>
            <td class="p-2">User</td>
          </tr>
          <tr class="even:bg-gray-400 odd:bg-white">
            <td class="p-2">Jane Smith</td>
            <td class="p-2">jane.smith@example.com</td>
            <td class="p-2">User</td>
          </tr>
          <tr class="even:bg-gray-400 odd:bg-white">
            <td class="p-2">Jane Smith</td>
            <td class="p-2">jane.smith@example.com</td>
            <td class="p-2">User</td>
          </tr>
          <tr class="even:bg-gray-400 odd:bg-white">
            <td class="p-2">Jane Smith</td>
            <td class="p-2">jane.smith@example.com</td>
            <td class="p-2">User</td>
          </tr>
          <tr class="even:bg-gray-400 odd:bg-white">
            <td class="p-2">Jane Smith</td>
            <td class="p-2">jane.smith@example.com</td>
            <td class="p-2">User</td>
          </tr>
          <tr class="even:bg-gray-400 odd:bg-white">
            <td class="p-2">Jane Smith</td>
            <td class="p-2">jane.smith@example.com</td>
            <td class="p-2">User</td>
          </tr>
          <tr class="even:bg-gray-400 odd:bg-white">
            <td class="p-2">Jane Smith</td>
            <td class="p-2">jane.smith@example.com</td>
            <td class="p-2">User</td>
          </tr>
          <tr class="even:bg-gray-400 odd:bg-white">
            <td class="p-2">Jane Smith</td>
            <td class="p-2">jane.smith@example.com</td>
            <td class="p-2">User</td>
          </tr>
          <tr class="even:bg-gray-400 odd:bg-white">
            <td class="p-2">Jane Smith</td>
            <td class="p-2">jane.smith@example.com</td>
            <td class="p-2">User</td>
          </tr>
          <tr class="even:bg-gray-400 odd:bg-white">
            <td class="p-2">Jane Smith</td>
            <td class="p-2">jane.smith@example.com</td>
            <td class="p-2">User</td>
          </tr>
          <tr class="even:bg-gray-400 odd:bg-white">
            <td class="p-2">Jane Smith</td>
            <td class="p-2">jane.smith@example.com</td>
            <td class="p-2">User</td>
          </tr>
          <tr class="even:bg-gray-400 odd:bg-white">
            <td class="p-2">Jane Smith</td>
            <td class="p-2">jane.smith@example.com</td>
            <td class="p-2">User</td>
          </tr>
          <tr class="even:bg-gray-400 odd:bg-white">
            <td class="p-2">Jane Smith</td>
            <td class="p-2">jane.smith@example.com</td>
            <td class="p-2">User</td>
          </tr>
          <!-- Add more rows here -->
        </tbody>
      </table>
      <div id="pagination" class="pagination"></div>
    </div>

    <script>
      const searchInput = document.getElementById("searchInput");
      const dataTable = document.getElementById("dataTable");
      const tableRows = dataTable.getElementsByTagName("tr");
      const pagination = document.getElementById("pagination");
      const rowsPerPage = 10;
      let currentPage = 1;
      function showRows(startIndex, endIndex) {
        for (let i = 0; i < tableRows.length; i++) {
          if (i >= startIndex && i < endIndex) {
            tableRows[i].style.display = "";
          } else {
            tableRows[i].style.display = "none";
          }
        }
      }
      function showPagination(totalRows) {
        pagination.innerHTML = "";

        const totalPages = Math.ceil(totalRows / rowsPerPage);

        for (let i = 1; i <= totalPages; i++) {
          const paginationItem = document.createElement("span");
          paginationItem.textContent = i;
          paginationItem.className = "pagination-item";
          if (i === currentPage) {
            paginationItem.classList.add("active");
          }

          paginationItem.addEventListener("click", function () {
            currentPage = i;
            const startIndex = (currentPage - 1) * rowsPerPage;
            const endIndex = startIndex + rowsPerPage;

            showRows(startIndex, endIndex);
            showPagination(totalRows);
          });

          pagination.appendChild(paginationItem);
        }
      }
      // searchInput.addEventListener("keyup", function () {
      //   const searchText = searchInput.value.toLowerCase();

      //   for (let i = 1; i < tableRows.length; i++) {
      //     // Start from index 1 to exclude thead row
      //     const cells = tableRows[i].getElementsByTagName("td");
      //     let found = false;

      //     for (let j = 0; j < cells.length; j++) {
      //       const cellText = cells[j].innerText.toLowerCase();

      //       if (cellText.includes(searchText)) {
      //         found = true;
      //         break;
      //       }
      //     }

      //     if (found) {
      //       tableRows[i].style.display = "";
      //     } else {
      //       tableRows[i].style.display = "none";
      //     }
      //   }
      // });
      function performSearch() {
        const searchText = searchInput.value.toLowerCase();
        // let filteredRows = [];
        for (let i = 1; i < tableRows.length; i++) {
          // Start from index 1 to exclude thead row
          const cells = tableRows[i].getElementsByTagName("td");
          let found = false;

          for (let j = 0; j < cells.length; j++) {
            const cellText = cells[j].innerText.toLowerCase();

            if (cellText.includes(searchText)) {
              found = true;
              break;
            }
          }

          if (found) {
            tableRows[i].style.display = "";
          } else {
            tableRows[i].style.display = "none";
          }
        }
        const startIndex = 0;
        // const endIndex = Math.min(rowsPerPage, filteredRows.length);

        showRows(startIndex, endIndex);
        // showPagination(filteredRows.length);
      }

      searchInput.addEventListener("keyup", performSearch);

      showRows(0, rowsPerPage);
      showPagination(tableRows.length - 1);
    </script>
  </body>
</html>
